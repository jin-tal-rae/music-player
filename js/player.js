
// 재생리스트 정보
var player_info = [
  {
    title: "공격력 상승 국내 힙합",
    img: "",
    list: [{
      id: "Bbl3qPS9x4o",
      title: "Siren Remix (Feat. UNEDUCATED KID, Paul Blanco) (사이렌 Remix (Feat. UNEDUCATED KID, Paul Blanco))",
      name: "Homies · UNEDUCATED KID · Paul Blanco"
    },{
      id: "1JHOl9CSmXk",
      title: "Cold Blooded (with 스트릿 우먼 파이터 (SWF)) MV",
      name: "Jessi (제시)"
    },{
      id: "hq9hcJIzB6w",
      title: "VVS (Feat. JUSTHIS) (Prod. GroovyRoom)",
      name: "Miranni , Munchman , Khundi Panda , MUSHVENOM"
    },{
      id: "PjLMkI9lt2c",
      title: "ON AIR (Feat. Loco, Jay Park & GRAY)",
      name: "lIlBOI"
    },{
      id: "rGVqQVMtaUo",
      title: "Freak (Prod. Slom)",
      name: "lIlBOI , Wonstein , Chillin Homie , Skyminhyuk"
    },{
      id: "zt1zcLJbftw",
      title: "Achoo (Feat. pH-1, HAON) (Prod. GroovyRoom)",
      name: "Miranni"
    },{
      id: "jd2DxTR0znU",
      title: "IndiGO",
      name: "JUSTHIS(저스디스), Kid Milli, NO:EL, Young B(영비)"
    },{
      id: "KT5nEChOISs",
      title: "존시나 (feat. Northfacegawd, JUSTHIS, 래원)",
      name: "염따(YUMDDA)"
    },{
      id: "bsgBUM2Mnsw",
      title: "BAND",
      name: "창모 CHANGMO, Hash Swan, ASH ISLAND, 김효은 Keem Hyo-Eun"
    },{
      id: "sP6y8aTE5NI",
      title: "DNA Remix",
      name: "박재범, YLN Foreign, D.Ark, 365LIT, pH-1, 릴보이, 이영지, Ourealgoat, Choo, OSUN"
    },{
      id: "s6bx7MCEZ6Y",
      title: "Selfmade Orange (Feat. SUPERBEE)",
      name: "창모 (CHANGMO)"
    },{
      id: "-PEwrXZApPI",
      title: "Win Win (Feat. Gaeko, BewhY) (Prod. BewhY)",
      name: "Rose de Penny , dsel , kaogaii , Untell"
    },{
      id: "2WhHrXon6Bg",
      title: "GO HIGH (Feat. 우원재, 창모, The Quiett) (Prod. CODE KUNST)",
      name: "이영지 Lee Young Ji"
    },{
      id: "aKuS6T2SZoI",
      title: "Acrobat(곡예사)",
      name: "Gwangil Jo(조광일)"
    },{
      id: "R2c5v0iJbgk",
      title: "The Roots (Feat. JUSTHIS) (Prod. GroovyRoom)",
      name: "Khundi Panda"
    },{
      id: "tE4PviEbSgA",
      title: "The Purge (Official Video) ",
      name: "Jay Park, pH-1, BIG Naughty , Woodie Gochild, HAON, TRADE L, Sik-K"
    },{
      id: "HhWAQDZX-Vg",
      title: " Good Day (Feat. 팔로알토 Paloalto) (Prod. 코드 쿤스트 CODE KUNST)",
      name: "pH-1, Kid Milli, 루피 "
    },{
      id: "yUnyZQYwGAc",
      title: "Want It (Feat. Paloalto) (Prod. CODE KUNST)",
      name: "Swings , Mckdaddy , Khakii , Layone"
    },{
      id: "GpygQthc4j4",
      title: "Turn Up! (Feat. M1NU, Veinyfl, Swervy, Layone, Young Ji Lee, Lil Nekh, D.Ark) (털어! (Feat. M1NU, Veinyfl, Swervy, 래원, 이영지, Lil Nekh, D.Ark))",
      name: "BIG Naughty · M1NU · Veinyfl · Swervy · Layone · Young Ji Lee · Lil Nekh · D.Ark"
    }]
  },{
    title: "추억의 미니홈피 BGM 베스트",
    color: "#fff",
    img: "",
    list: [{
      id: "N16i7m0rMa0",
      title: "물고기자리",
      name: "이안"
    },{
      id: "dYIT_jeUBKg",
      title: "Y",
      name: "프리스타일"
    },{
      id: "MzCbEdtNbJ0",
      title: "HARU HARU(하루하루)",
      name: "빅뱅"
    },{
      id: "LOXEVd-Z7NE",
      title: "HEARTBREAKER",
      name: "G-DRAGON"
    },{
      id: "dXQzwNb8G7g",
      title: "비행기",
      name: "거북이"
    },{
      id: "2Cv3phvP8Ro",
      title: "LIES(거짓말)",
      name: "빅뱅"
    },{
      id: "nhuFm3BGIBY",
      title: "너에게 쓰는 편지 (Feat. 린)",
      name: "MC몽"
    },{
      id: "eq8_0g4YBPc",
      title: "가시",
      name: "버즈"
    },{
      id: "rgms0zs6SZc",
      title: "남자를 몰라",
      name: "버즈"
    },{
      id: "PlOPWA_DE4U",
      title: "그녀를 사랑해줘요",
      name: "하동균"
    },{
      id: "BY4sHNaV4WU",
      title: "눈의 꽃",
      name: "박효신"
    },{
      id: "upA01bvUemQ",
      title: "귀로",
      name: "나얼"
    },{
      id: "d1sXqVAh2CY",
      title: "Ballerino",
      name: "리쌍"
    },{
      id: "RjU5Op_KSBw",
      title: "만약에",
      name: "태연"
    },{
      id: "OJhA9nOXMWw",
      title: "광대",
      name: "리쌍"
    },{
      id: "yriaLVToQI0",
      title: "사랑과 전쟁 (Narr. 하하)",
      name: "다비치"
    },{
      id: "3rYL8AHJaTc",
      title: "헤어지지 못하는 여자, 떠나가지 못하는 남자",
      name: "리쌍"
    },{
      id: "yROjTblMPag",
      title: "외톨이",
      name: "아웃사이더"
    },{
      id: "KeMbLY7ztDw",
      title: "사랑했나봐",
      name: "윤도현"
    },{
      id: "X9A4LM0KqpI",
      title: "몽환의 숲 (feat. 이루마)",
      name: "키네틱플로우"
    },{
      id: "qdr0fZbuffY",
      title: "Love Love Love",
      name: "에픽하이"
    },{
      id: "Q8gyOnaxzHU",
      title: "Bk Love",
      name: "MC스나이퍼"
    },{
      id: "EWosRTwEpw0",
      title: "그댄 달라요",
      name: "한예슬"
    },{
      id: "FMFBL8HtIFs",
      title: "미워도 다시 한번 (Original Ver.)",
      name: "바이브"
    }]
  },{
    title: "기분이 좋아지는 재즈",
    img: "",
    list: [{
      id: "5Ry9L17HQ5Q",
      title: "Sister Sadie",
      name: "Joe Pass"
    },{
      id: "Oos-YHx8qXo",
      title: "SING SING SING-7247-DNC",
      name: "BENNY GOODMAN"
    },{
      id: "USASohfZK5E",
      title: "Calypso",
      name: "Kenny Barron"
    },{
      id: "BuV9nBzLn1s",
      title: "Blues for Junior",
      name: "Herb Ellis Quintet"
    },{
      id: "rkoQLRHkFXY",
      title: "Sunday Morning",
      name: "Grant Green"
    },{
      id: "krcKl2aC1yY",
      title: "My Heart Stood Still",
      name: "The Alex Levin Trio"
    },{
      id: "Q6yLEDpDrNw",
      title: "Satin Doll",
      name: "Eddie Higgins"
    },{
      id: "zmE5Gs8grdo",
      title: "Little Girl Blue",
      name: "Eddie Higgins"
    },{
      id: "IARliphiUM4",
      title: "La vie en rose (Single Version)",
      name: "Louis Armstrong And His Orchestra"
    },{
      id: "NhLQ6wc6wyA",
      title: "All Of You",
      name: "Ray Brown"
    },{
      id: "oQfqw3s8QtQ",
      title: "I Fall In Love Too Easily",
      name: "Chet Baker"
    },{
      id: "IXFRQlszTQs",
      title: "Tried Up",
      name: "Ama Lou"
    },{
      id: "T_HbpV3PLgs",
      title: "When You Wish Upon a Star (Mono Version)",
      name: "The Dave Brubeck Quartet"
    },{
      id: "LLDjfRAKAVc",
      title: "Tenderly (Album Version)",
      name: "Bill Evans Trio"
    },{
      id: "0omaPcIShPk",
      title: "Melody For C",
      name: "Sonny Clark"
    },{
      id: "klhCx_zXYlg",
      title: "First Responders",
      name: "Terrace Martin, Robert Glasper, 9th Wonder, Kamasi Washington, Dinner Party"
    },{
      id: "Varl3SQuZ2I",
      title: "Village Days",
      name: "Terrace Martin, Dinner Party"
    },{
      id: "As1OF8HTwG0",
      title: "The Nearness of You",
      name: "Paul Bley"
    },{
      id: "h7W7U-h2AJw",
      title: "Some Day My Prince Will Come",
      name: "The Bill Evans Trio"
    },{
      id: "3BPhdGKc2Dg",
      title: "When I Fall In Love",
      name: "The Bill Evans Trio"
    },]
  },{
    title: "나를 위로해주는 힐링 가요",
    img: "",
    list: [{
      id: "TqIAndOnd74",
      title: "My sea (아이와 나의 바다)",
      name: "아이유"
    },{
      id: "-Ih5UArd4zk",
      title: "Like Water",
      name: "웬디 (WENDY)"
    },{
      id: "Xn1ZMrGWxjQ",
      title: "나의 첫사랑 (First Loss)",
      name: "다비치 (Davichi)"
    },{
      id: "5iSlfF8TQ9k",
      title: "한숨 (Breathe)",
      name: "이하이 (Lee Hi)"
    },{
      id: "poiZpOXZXN8",
      title: "좋아좋아 (I Like You)",
      name: "조정석 (CHO JUNG SEOK)"
    },{
      id: "SK6Sm2Ki9tI",
      title: "신호등 (Traffic light)",
      name: "이무진 (Lee Mujin)"
    },{
      id: "eHir_vB1RUI",
      title: "Rain",
      name: "태연 (TAEYEON)"
    },{
      id: "ZYBY490Undc",
      title: "Je T'aime",
      name: "조이 (JOY)"
    },{
      id: "pC6tPEaAiYU",
      title: "TOMBOY",
      name: "혁오 (HYUKOH)"
    },{
      id: "IgPcbE--mMA",
      title: "고백 (Go Back)",
      name: "멜로망스 (MeloMance)"
    },{
      id: "87E6ES3OtHI",
      title: "찬란한 계절",
      name: "폴킴 (Paul Kim)"
    },{
      id: "P9_nq8q6JDY",
      title: "일이 너무 잘 돼 (Things are going well)",
      name: "헤이즈(Heize) - 작사가 (Lyricist)"
    },{
      id: "zRq_DlEzygk",
      title: "오늘의 기분 (Today's Mood)",
      name: "치즈 (CHEEZE)"
    },{
      id: "t9aZFgD0mic",
      title: "산책",
      name: "백예린 (Yerin Baek)"
    },{
      id: "c0gZnxJ5U6c",
      title: "잠이 들어야 (Feat. 헤이즈)",
      name: "로꼬 (Loco)"
    },{
      id: "JLT8qOdpDPM",
      title: "별 보러 가자",
      name: "적재"
    },{
      id: "CHzHPVSvlM0",
      title: "I will light your way(너의 발걸음에 빛을 비춰줄게(Prod. Cho Young Soo(조영수))",
      name: "케이시 (Kassy)"
    },{
      id: "KYgxjGyqf98",
      title: "Cherry blossom(Feat. Sonny zero, Ashley Alisha)",
      name: "뎁트 (Dept)"
    },{
      id: "Woo01RW7_jU",
      title: "always be by your side (너의 별이 되어줄게)",
      name: "윤원"
    },{
      id: "7ix0oRcbFj4",
      title: "사랑을 하고 있어 (I'm in Love)",
      name: "강아솔 (Kang Asol)"
    }]
  },{
    title: "기분이 좋아지는 남녀 듀엣곡",
    img: "",
    list: [{
      id: "ZYtfSGVT-OI",
      title: "Dream",
      name: "수지 & 백현"
    },{
      id: "uAkf3ZZyFN0",
      title: "짧은머리 ",
      name: "허각 & 정은지"
    },{
      id: "uyWdED9FvBM",
      title: "착해 빠졌어",
      name: "소유 & 매드클라운"
    },{
      id: "3fR9Uzt06WM",
      title: "All For You(리메이크 곡)",
      name: "서인국 & 정은지"
    },{
      id: "p_1ypvwxiSw",
      title: "썸",
      name: "소유 & 정기고"
    },{
      id: "myxdukZHJ9E",
      title: "한여름밤의 꿀",
      name: "San E & 레이나"
    },{
      id: "rpq2auav_jk",
      title: "잔소리",
      name: "아이유 & 임슬옹"
    },{
      id: "eWP6dKzYfuE",
      title: "설렘주의",
      name: "NS윤지 & 기리보이"
    },{
      id: "-t2BFc8QIrA",
      title: "사람냄새",
      name: "개리 & 정인"
    },{
      id: "5UQzXbizT-s",
      title: "Say Yes (달의 연인 - 보보경심 려 OST Part 2)",
      name: "로꼬 & 펀치"
    },{
      id: "7E1w3BoYm_w",
      title: "Perhaps Love(사랑인가요)",
      name: "에릭남 & 치즈"
    }]
  }
];

var repeat_mode = 'NoRepeat'; //재생반복모드 NoRepeat, All, One 제어
var sound_mode = 'on'; //사운드모드 ON, OFF 제어
var no_data = 'on'; //그룹 리스트를 선택안하고 상단 플레이어 탭과 리스트탭 클릭시 기본데이터가 플레이되도록 실행

//재생바 타이머 관련
var isPause = true; // 타이머 실행중인지 구분 true=정지, false=실행
var audioTimer; // 타이머 종료를 위해 만든 변수
var progress_val = 0;	// 현재 재생시간 %로 값 표시
var playtime = 0;	// 현재 재생시간 00:00 표시
var maxTime = 0; // 총재생시간 00:00 표시

var play_list; //그룹 리스트를 담는 변수
var play_id; //재생할 아이디를 담는 변수



//★ 유튜브API 기본소스 시작 ★

var index = 0; //재생중인 인덱스
var option = ''; //랜덤재생 타입변경 변수
var onLoad;
var yPlayer;

// 빈 값 체크
var isEmpty = function(value){
  if( value == "" || value == null || value == undefined || ( value != null && typeof value == "object" && !Object.keys(value).length ) ){ 
    return true 
  }else{ 
    return false 
  } 
};

function loadYouTubeApi() {
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  play_id = play_list[index].id; // 재생목록 담기
}

function onYouTubeIframeAPIReady() {
  yPlayer = new YT.Player('player', {
    width: '100%',
    videoId: play_id,
    playerVars : { 
      'rel': 0,             		            // 추천영상 노출 업데이트 이후로 작동안함
      'autoplay': 0,                        // 자동재생
      'cc_load_policy' : 0,                 // 자막 0 : on, 1 : off
      'controls': 0,                       // 동영상 플레이어 컨트롤 표기
      'disablekb' : 0,                       // 키보드 컨트롤 사용 중지
      'modestbranding' : 0,                 // 동영상 로고표시 유무 업데이트 이후로 작동안함
      'showinfo' : 1                        // 재생영상에 대한 정보 유무
    }, 
    events: {
      'onReady': onPlayerReady,             //로딩중에 이벤트 실행
      'onStateChange': onPlayerStateChange ,//플레이어 상태 변화 시 이벤트를 실행
      'onError': onPlayerError              //플레이어 오류 발생시 실행
    }
  });
}

//플레이어 오류 발생시 실행
function onPlayerError(event) {
  console.log('Error');
  if ( event.data == 150 ){
    yPlayer.stopVideo();
    onPlayerStateChange_excute();
  }
}

//로딩중에 이벤트 실행
function onPlayerReady(event) {
  var sound_value = $(".sound_control").val();
  yPlayer.setPlaybackRate(1);
  event.target.setVolume(sound_value);
  yPlayer.playVideo();
  $(".player_bg").css('opacity', '0');
  $(".player").css('opacity', '0');
  $(".player_info").css('opacity', '0');
  $('.player_total .player_title').html(play_list[index].title);
  $('.player_total .player_name').html(play_list[index].name);
  $('.player_bg').css('background','linear-gradient(to bottom, rgba(255,255,255,0) 40%, rgba(255,255,255,0.5) 60%, rgba(255,255,255,0.7) 70%, rgba(255,255,255,1) 80%, rgba(255,255,255,1) 95%, rgba(255,255,255,1) 100%), url(https://img.youtube.com/vi/' + play_list[index].id + '/mqdefault.jpg) no-repeat top/cover ');

  maxTime = Math.floor(event.target.getDuration());
  var duration = setTimeFormat(maxTime - 1);
  $(".play-time .end").text(duration);
  $(".time_control").prop("max", maxTime);
  timeControls(0);
  //음소거 off 체크시 유지하기
  if(sound_mode === 'off'){
    volumeMute('off')
  }
} 

//플레이어 상태 변화 시 이벤트를 실행 
// -1 –시작되지 않음
//  0 – 종료        YT.PlayerState.ENDED
//  1 – 재생 중     YT.PlayerState.PLAYING
//  2 – 일시중지    YT.PlayerState.PAUSED
//  3 – 버퍼링      YT.PlayerState.BUFFERING
//  5 – 동영상 신호  YT.PlayerState.CUED
function onPlayerStateChange(event) {
  stopAudioTimer(); // 타이머 중지
  if (event.data == YT.PlayerState.PLAYING) {
    $(".player_bg").animate({ opacity: "1" }, 500, "easeOutQuad")
    $(".player").animate({ opacity: "1" }, 500, "easeOutQuad")
    $(".player_info").animate({ opacity: "1" }, 500, "easeOutQuad")

    // 재생중
    play_on("true");
    startAudioTimer(); // 오디오 재생시 타이머 시작, 재생바 진행, 재생시간 시작
  }else if(event.data == YT.PlayerState.PAUSED) {
    // 일시정지
    play_on("false");
    stopAudioTimer(); // 타이머 중지
  }else if (event.data == YT.PlayerState.ENDED) {
    // 종료
    play_on("false");
    $(".play-time .start").text('00:00');	// 재생시간 초기화
    $(".play-time .end").text('00:00');	// 전체시간 초기화
    $(".play-progress-bar").width(0);	// 재생바 초기화
    $(".time_control").prop("value", 0);
    setTimeout(onPlayerStateChange_excute, onLoad); // 재생 완료후 
  }else if (event.data == YT.PlayerState.BUFFERING) {

  }else if (event.data == YT.PlayerState.CUED) {
    play_on("false");
    stopAudioTimer(); // 타이머 중지
  }
}
//★ 유튜브API 기본소스 끝 ★




/* 재생시 인터벌 시작
: 재생 로딩바 시작
: 재생시간 포멧 변경 시작 */
function startAudioTimer(){
  isPause = false;
  audioTimer = setInterval(function(){
    varTimerMove();
  }, 1000);
}

function varTimerMove(){ 
  if(!isPause){
    // youtube 링크 삽입일 경우
    // 해당 동영상의 정보중 현재 재생시간을 가져온다.
    var currentTime = Math.floor(yPlayer.getCurrentTime());

    // 00:00의 형식으로 표기하기위해 포맷변경
    playtime = setTimeFormat(Math.floor(yPlayer.getCurrentTime()));
    
    // 가져온 현재 재생시간을 progress bar에 표기하기위해 currentTime가공
    // 재생 완료를 100으로 잡고 현재 재생시간을 계산
    // 소수점 첫번째 자리까지 계산
    progress_val = (currentTime/maxTime)*100;//시간을 100%로 표시되도록 계산
    progress_val = progress_val.toFixed(1);//toFixed() 메서드는 숫자를 고정 소수점 표기법으로 표기해 반환합니다.
    $(".play-time .start").text(playtime);
    $(".play-progress-bar").css('width', progress_val+"%");
    //재생바현재위치 표시]
    $(".time_control").prop("value", currentTime);
  }
}

//타이머 중지
function stopAudioTimer(){ 
  clearInterval(audioTimer); 
  isPause = true;
}

// 재생시간 포멧변경
function setTimeFormat(sec_time){
  var sec_num = parseInt(sec_time);
  var minutes = Math.floor(sec_num / 60);
  var seconds = sec_num - (minutes * 60);

  if (minutes < 10) {minutes = "0"+minutes;}
  if (seconds < 10) {seconds = "0"+seconds;}
  
  return minutes + ':' + seconds;
}

// 재생위치 클릭시 이동
function timeControls(time){
  var time_var = (time/maxTime)*100;
  yPlayer.seekTo(time);
  $(".time_control").prop("value", time);
  $(".play-time .start").text(setTimeFormat(time));
  $(".play-progress-bar").css('width', time_var+"%");
}

// 재생시간 완료후 다음곡으로 넘어갈때 실행
function onPlayerStateChange_excute(){
  if(repeat_mode === 'All'){
    if(play_list.length <= index+1){
      listPlayer(0);
    }else{
      nextVideo();
    }
  }else if(repeat_mode === 'One'){
    listPlayer(index);
  }else{
    nextVideo();
  }
}

// 첫 실행시 실행(그룹에서 선택시)
function execute_func(grouplist){
  if ( isEmpty(play_list[0]) == false ){
    if ( isEmpty(yPlayer) == false ){
      yPlayer.stopVideo();
      yPlayer.destroy();
      yPlayer = null;     
      index = 0;
      onYouTubeIframeAPIReady();
    }
    loadYouTubeApi(grouplist);
    page_on(index);
    play_on("true");
  }
}

// 재생함수
function playload(grouplist) {
  yPlayer.stopVideo();
  yPlayer.destroy();
  yPlayer = null;
  play_id = play_list[index].id;
  isPause = true;
  loadYouTubeApi(grouplist);
  onYouTubeIframeAPIReady();
  page_on(index);
  play_on("true");
}


//★ 버튼제어
// 재생
function playVideo(grouplist) {
  if(option == "Sequen"){
    yPlayer.playVideo();
  }else if(option == "Random"){
    yPlayer.playVideo();
  }else{
    option = "Sequen";
    execute_func(grouplist); //첫 실행시 실행
  }
}

// 순차, 랜덤재생 제어
function randomVideo() {
  if(option == "Sequen"){
    option = "Random";
    $('.controls .btn_random').addClass('on');
  }else{
    option = "Sequen";
    $('.controls .btn_random').removeClass('on');
  }
}

// 반복재생, 한곡만재생
function repeatVideo() {
  if(repeat_mode == "NoRepeat"){
    $('.controls .btn_repeat').addClass('all');
    repeat_mode = "All";
  }else if(repeat_mode == "All"){
    $('.controls .btn_repeat').addClass('one');
    $('.controls .btn_repeat').removeClass('all');
    repeat_mode = "One";
  }else{
    $('.controls .btn_repeat').removeClass('one');
    repeat_mode = "NoRepeat";
  }
}

// 일시정지
function pauseVideo() {
  yPlayer.pauseVideo();
}

// 종료
function stopVideo() {
  yPlayer.stopVideo();
}

// 다음재생
function nextVideo() {
  if( isEmpty(yPlayer) == false ){
    if(option == "Sequen" ){
      //순차재생
      if( index < play_list.length - 1){
        index++;
        playload();
      }else{ 
        if(repeat_mode == "All"){
          listPlayer(0);
        }else{
          alert("다음 곡이 없습니다."); 
        }
      }
    }else{ 
      //랜덤재생
      index = Math.floor(Math.random() * play_list.length);  
      playload();
    }
  }
}

// 이전재생
function prevVideo() {
  if ( isEmpty(yPlayer) == false ){
    if (option == "Sequen" ){
      if ( index > 0){
        index--;
        playload();
      }else{ 
        if(repeat_mode == "All"){
          listPlayer(play_list.length - 1);
        }else{
          alert("이전 곡이 없습니다."); 
        }
      }

    }else{ 
      index = Math.floor(Math.random() * play_list.length);  
      playload();
    }
  }
}

// 음소거 On / Off
function volumeMute(sound_m) {
  var volum_num = $('.sound_control.on').val();
  var volum_lineargradient = 'linear-gradient(to right, #636AD8 0%, #636AD8 '+ volum_num +'%, #c4c4c4 '+ volum_num +'%, #c4c4c4 100%)';
  if(sound_m == 'on') {
    // 음소거 해제
    $(".sound_control.off").css("display", "none");
    $(".sound_control.on").css("display", "");
    $(".sound_control.on").prop("value", volum_num);
    $('.sound_control.on[type=range]').css('background', volum_lineargradient);
    $('.sound_down').removeClass('soundOff');
    $(".sound_down").attr("onClick", "volumeMute('off');");//리스트가 ON일이면서 정지일시 링크변경

    yPlayer.unMute();
    yPlayer.setVolume(volum_num);
    sound_mode = 'on';
  }else if(sound_m == 'off') {
    // 음소거
    $(".sound_control.on").css("display", "none");
    $(".sound_control.off").css("display", "");
    $(".sound_control.off").prop("value", 0);
    $('.sound_control.off[type=range]').css('background', 'linear-gradient(to right, #636AD8 0%, #c4c4c4 1%, #c4c4c4 100%)');
    $('.sound_down').addClass('soundOff');
    $(".sound_down").attr("onClick", "volumeMute('on');");//리스트가 ON일이면서 정지일시 링크변경
    yPlayer.mute();
    sound_mode = 'off';
  }
}

// 볼륨 조절
function soundControl(number) {
  yPlayer.setVolume(number);
}

//음소거off일때 조절시 볼륨 0으로 초기화
function soundControl1() {
  $(".sound_control.off").prop("value", 0);
}

//리스트 선택시 실행
function listPlayer(list_id){
  if ( isEmpty(yPlayer) == false ){
    index = list_id;
    playload();
  }
}

//그룹 선택시 실행
function group(grouplist){
  no_data = 'off';

  // 재생 리스트에 선택한 그룹의 리스트 담기
  for(var j = 0; j < player_info.length; j++){
    if(j === grouplist){
      play_list = player_info[grouplist].list;
    }
  }

  // 재생 리스트 뿌려주기
  function playerList() {
    var html = '';
    for(var i = 0; i < player_info.length; i++){
      html += '<h2>Playlist<span class="group_title"></span></h2>';
      html += '<div class="list_box"><ul>';
      for(var i = 0; i < play_list.length; i++){
        html += '<li class="list' + i + '">';
        html += '<div class="img_box"><img src="https://img.youtube.com/vi/' + play_list[i].id + '/0.jpg"></div>';
        html += '<div class="info_box">';
        html += '<p class="title">' + play_list[i].title + '</p>';
        html += '<p class="name">' + play_list[i].name + '</p>';
        html += '<div class="time_total"><div class="play-progress-box"><div class="play-progress-bar"></div><input type="range" class="time_control" value="0" onChange="timeControls(this.value);"/></div><div class="play-time"><div class="start">00:00</div><div class="end">00:00</div></div></div>';
        html += '</div>';
        html += '<a class="list_btn_play" href="#" onClick="listPlayer(' + i + ');">재생</a>';
        html += '</li>';
      }
      html += '</ul></div>';
    }
    return html;
  }
  $('.player_list').html(playerList());
  $(".group_title").text(player_info[grouplist].title);

  $('.menu_player_total').addClass('active');
  $('.menu_player_genre').removeClass('active');
  $('.player_genre').css('display', 'none');
  $('.player_total').css('display', 'block');


  if(isEmpty(yPlayer) == false ){
    index = 0;
    playload(grouplist);
  }else{
    //플레이어 첫 재생시에만 실행
    playVideo(grouplist);
  }

  //타이머바 마우스 클릭 중일때 재생정지
  $('.time_control').on('mousedown',function(){
    pauseVideo();
    RangeSlider();
  })

  //타이머바 마우스 클릭 풀었을때 재생
  $('.time_control').on('mouseup',function(){
      playVideo();
  })

  //타이머바 터치시 재생정지
  $(".time_control").on("touchstart", function(e){
    pauseVideo();
  }); 

  //타이머바 터치중 위치이동
  $(".time_control").on("touchmove", function(e){
    RangeSlider();
  });

  //타이머바 터치 풀었을때 재생
  $(".time_control").on("touchend", function(e){
      playVideo();
  }); 

  //타이머바 드래그중일때 위치 실시간 변경
  var range = $('.time_control');
  var RangeSlider = function(){
    range.off('input').on('input', function(){		
     var time_var = (this.value/maxTime)*100;
      if(time_var < 99){
        timeControls(this.value);
      }
    });
  }
  
}

//플레이어 리스트 위치 및 애니메이션
function list_animation(){
  var listBox_height = $(".list_box").outerHeight(true);
  var ul_height = $(".list_box ul").outerHeight(true);
  var li_height = $(".list_box li").outerHeight(true);
  var li_margin = li_height - $(".list_box li").outerHeight();
  var li_index = li_height * index;

  if(li_index > ul_height - listBox_height + li_margin){
    li_index = ul_height - listBox_height + li_margin;
  }else{
    li_index = li_index;
  }

  for(var i = 0; i < play_list.length; i++){
      $(".list_box .list"+i).animate({ marginTop:"15rem", opacity: "0" }, 0, "easeOutQuad").animate({ marginTop: "0rem", opacity: "1" }, (((i+1)*0.5)*100)+450, "easeOutQuad");
  }
  $('.list_box').animate( { scrollTop : li_index }, 400 );

}


//실행중인 플레이어 리스트 ON 제어
function page_on(on){
  for(var i = 0; i < play_list.length; i++){
    var list_off = 'listPlayer('+i+')';
    if(i === on){
      $('.player_list ul li.list'+i).addClass('on');
      $('.player_list ul li.list'+i+' .time_total').css('display','block');
      $(".player_list ul li.list"+i+' .time_total').animate({ opacity: "0" }, 700, "easeOutQuad")
      $(".player_list ul li.list"+i+' .time_total').animate({ opacity: "1" }, 100, "easeOutQuad")
    }else{
      $('.player_list ul li.list'+i).removeClass('on');
      $(".player_list ul li.list"+i+' .time_total').animate({ opacity: "0" }, 100, "easeOutQuad")
      $('.player_list ul li.list'+i+' .time_total').css('display','none');
      $('.player_list ul li.list'+i+' .list_btn_play').attr('onClick', list_off);//선택한 리스트가 아닐때 링크값 초기화
    }
  }
}

//재생버튼 play, pause 제어
function play_on(on){
  if(on === "false"){
    $(".btn_play").removeClass("pause");
    $(".btn_play").addClass("play");
    $(".btn_play span").text("재생");
    $(".btn_play").attr("onClick", "playVideo();");
    $(".player_list ul li.on .list_btn_play").attr("onClick", "playVideo()");//리스트가 ON일이면서 정지일시 링크변경
    $(".player_list ul li.on .list_btn_play").addClass("on");
  }else{
    $(".btn_play").removeClass("play");
    $(".btn_play").addClass("pause");
    $(".btn_play span").text("정지");
    $(".btn_play").attr("onClick", "pauseVideo();");
    $(".player_list ul li.on .list_btn_play").attr("onClick", "pauseVideo()");//리스트가 ON이면서 플레이시에 링크변경
    $(".player_list ul li.on .list_btn_play").removeClass("on");
  }
}

//그룹 목록 뿌려주기
function groupList() {
  var html = '';
  html += '<div class="swiper-wrapper">'
  for(var i = 0; i < player_info.length; i++){
    html += '<div class="swiper-slide genre_group list' + i + '">';
    html += '<div class="thumb_box" style="background: linear-gradient(to bottom, rgba(255,255,255,0) 65%, rgba(255,255,255,0.5) 80%, rgba(255,255,255,0.7) 90%, rgba(255,255,255,1) 95%, rgba(255,255,255,1) 98%, rgba(255,255,255,1) 100%), url(https://img.youtube.com/vi/' + player_info[i].list[0].id + '/maxresdefault.jpg) no-repeat top/cover; "></div>'
    html += '<button class="btn_genre_group" onClick="group(' + i + ');"><span class="blind">재생</span></button>';
    // html += '';
    html += '<div class="auto_slide"><h3 style="color:'+ player_info[i].color +';">' + player_info[i].title + '</h3><div class="auto_slide_list"><ul class="swiper-wrapper">';
    for(var j = 1; j < player_info[i].list.length; j++){
      if(j < 21){
        html += '<li class="swiper-slide"><div class="player_info"><div class="img_box"><img src="https://img.youtube.com/vi/' + player_info[i].list[j].id + '/0.jpg" width="100%"></div><h2 class="player_title">'+  player_info[i].list[j].title +'</h2><p class="player_name">'+player_info[i].list[j].name+'</p></div></li>';
      }
    }
    html += '</ul></div></div>';
    html += '</div>';
  }
  html += '</div>';
  html += '<div class="swiper-pagination"></div>';
  return html;
}



//접속시 실행
$(window).on('load', function() {

  $('.player_genre .genre_wrap').html(groupList());
  $('.sound_control.on[type=range]').css('background', 'linear-gradient(to right, #636AD8 0%, #636AD8 50%, #c4c4c4 50%, #c4c4c4 100%)');
  $('.sound_control.on[type=range]').on('input', function(){ 
    var val = $(this).val(); $(this).css('background', 'linear-gradient(to right, #636AD8 0%, #636AD8 '+ val +'%, #c4c4c4 ' + val + '%, #c4c4c4 100%)'); 
  });
  $(".sound_control.off").css("display", "none");
  

  var swiper2 = new Swiper('.auto_slide_list', {
    slidesPerView: 4,
    loop: true,
    autoplay: {
      delay: 2500,
      disableOnInteraction: false,
    },
  });

  // 인트로
  setTimeout(function() {
    $('.intro').css('display', 'none');
  }, 4500); 
  
  // Top Menu
  $('.menu_player_genre').click(function() {
    $('.player_list').hide();
    $('.player_total').hide();
    $('.player_genre').show();

  });

  $('.menu_player_total').click(function() {
    if(no_data === 'on'){
      //처음 그룹선택안하고 플레이창 이동시 첫번째 그룹 실행
      group(0);
      no_data = 'off';
    }else{
      $('.player_list').hide();
      $('.player_genre').hide();
      $('.player_total').show();
    }
  });

  $('.menu_player_list').click(function() {
    if(no_data === 'on'){
      //처음 그룹선택안하고 리스트창 이동시 첫번째 그룹 실행
      group(0);
      no_data = 'off';
    }
    $('.player_genre').hide();
    $('.player_total').show();
    $('.player_list').show();
    list_animation();
  });

  var swiper = new Swiper('.genre_wrap', {
    direction: 'vertical',
    mousewheel: true,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
  });

  $('nav li').click(function() {
    $(this).addClass('active').siblings().removeClass('active');
  });
});
